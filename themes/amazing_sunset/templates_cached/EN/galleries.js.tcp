<?php
return unserialize("a:5:{i:0;a:1:{i:0;a:1:{i:0;a:5:{i:0;s:33:\"tcpfunc_58dcba5e815a68.15458612_1\";i:1;a:0:{}i:2;i:1;i:3;s:0:\"\";i:4;s:0:\"\";}}}i:1;a:0:{}i:2;s:9:\"galleries\";i:3;N;i:4;a:1:{s:33:\"tcpfunc_58dcba5e815a68.15458612_1\";s:7227:\"\$tpl_funcs['tcpfunc_58dcba5e815a68.15458612_1']=\$KEEP_TPL_FUNCS['tcpfunc_58dcba5e815a68.15458612_1']=recall_named_function('58dcba5e815b40.49208311','\$parameters,\$cl',\"echo \\\"\\\\\\\"use strict\\\\\\\";\\\\n\\\\nif (typeof window.slideshow_timer=='undefined')\\\\n{\\\\n	window.slideshow_timer=null;\\\\n	window.slideshow_slides={};\\\\n	window.slideshow_time=null;\\\\n}\\\\n\\\\nfunction initialise_slideshow()\\\\n{\\\\n	reset_slideshow_countdown();\\\\n	start_slideshow_timer();\\\\n\\\\n	add_event_listener_abstract(window,'keypress',toggle_slideshow_timer);\\\\n\\\\n	add_event_listener_abstract(document.getElementById('gallery_nav'),'click',function(event) {\\\\n		if (typeof event=='undefined') event=window.event;\\\\n\\\\n		if (event.altKey || event.metaKey)\\\\n		{\\\\n			var b=document.getElementById('gallery_entry_screen');\\\\n			if (typeof b.webkitRequestFullScreen!='undefined') b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\\\\n			if (typeof b.mozRequestFullScreenWithKeys!='undefined') b.mozRequestFullScreenWithKeys();\\\\n			if (typeof b.requestFullScreenWithKeys!='undefined') b.requestFullScreenWithKeys();\\\\n		} else\\\\n		{\\\\n			toggle_slideshow_timer();\\\\n		}\\\\n	});\\\\n\\\\n	slideshow_show_slide(window.slideshow_current_position); // To ensure next is preloaded\\\\n}\\\\n\\\\nfunction start_slideshow_timer()\\\\n{\\\\n	if (!window.slideshow_timer)\\\\n	{\\\\n		window.slideshow_timer=window.setInterval(function() {\\\\n			window.slideshow_time--;\\\\n			show_current_slideshow_time();\\\\n\\\\n			if (window.slideshow_time==0)\\\\n			{\\\\n				slideshow_forward();\\\\n			}\\\\n		} ,1000);\\\\n	}\\\\n\\\\n	if (window.slideshow_current_position!=window.slideshow_total_slides-1)\\\\n		document.getElementById('gallery_entry_screen').style.cursor='progress';\\\\n}\\\\n\\\\nfunction show_current_slideshow_time()\\\\n{\\\\n	var changer=document.getElementById('changer_wrap');\\\\n	if (changer) set_inner_html(changer,'\\\",\\n	ecv(\\\$cl,array(),2,\\\"galleries:CHANGING_IN\\\",array(\\\"xxx\\\")),\\n	\\\"'.replace('xxx',(window.slideshow_time<0)?0:window.slideshow_time));\\\\n}\\\\n\\\\nfunction reset_slideshow_countdown()\\\\n{\\\\n	var slideshow_from=document.getElementById('slideshow_from');\\\\n	window.slideshow_time=slideshow_from?window.parseInt(slideshow_from.value):5;\\\\n\\\\n	show_current_slideshow_time();\\\\n\\\\n	if (window.slideshow_current_position==window.slideshow_total_slides-1)\\\\n		window.slideshow_time=0;\\\\n}\\\\n\\\\nfunction toggle_slideshow_timer()\\\\n{\\\\n	if (window.slideshow_timer)\\\\n	{\\\\n		stop_slideshow_timer();\\\\n	} else\\\\n	{\\\\n		show_current_slideshow_time();\\\\n		start_slideshow_timer();\\\\n	}\\\\n}\\\\n\\\\nfunction stop_slideshow_timer(message)\\\\n{\\\\n	if (typeof message=='undefined') message='\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"galleries:STOPPED\\\",array()),\\n	\\\"';\\\\n	var changer=document.getElementById('changer_wrap');\\\\n	if (changer) set_inner_html(changer,message);\\\\n	if (window.slideshow_timer) window.clearInterval(window.slideshow_timer);\\\\n	window.slideshow_timer=null;\\\\n	document.getElementById('gallery_entry_screen').style.cursor='';\\\\n}\\\\n\\\\nfunction slideshow_backward()\\\\n{\\\\n	if (window.slideshow_current_position==0) return false;\\\\n\\\\n	slideshow_show_slide(window.slideshow_current_position-1);\\\\n\\\\n	return false;\\\\n}\\\\n\\\\nfunction player_stopped()\\\\n{\\\\n	slideshow_forward();\\\\n}\\\\n\\\\nfunction slideshow_forward()\\\\n{\\\\n	if (window.slideshow_current_position==window.slideshow_total_slides-1)\\\\n	{\\\\n		stop_slideshow_timer('\\\",\\n	ecv(\\\$cl,array(2,8),2,\\\"galleries:LAST_SLIDE\\\",array()),\\n	\\\"');\\\\n		return false;\\\\n	}\\\\n\\\\n	slideshow_show_slide(window.slideshow_current_position+1);\\\\n\\\\n	return false;\\\\n}\\\\n\\\\nfunction slideshow_ensure_loaded(slide,callback)\\\\n{\\\\n	if (typeof window.slideshow_slides[slide]!='undefined')\\\\n	{\\\\n		if (typeof callback!='undefined')\\\\n		{\\\\n			callback();\\\\n		}\\\\n		return; // Already have it\\\\n	}\\\\n\\\\n	if (window.slideshow_current_position==slide) // Ah, it's where we are, so save that in\\\\n	{\\\\n		window.slideshow_slides[slide]=get_inner_html(document.getElementById('gallery_entry_screen'));\\\\n		return;\\\\n	}\\\\n\\\\n	if ((slide==window.slideshow_current_position-1) || (slide==window.slideshow_current_position+1))\\\\n	{\\\\n		var url;\\\\n		if (slide==window.slideshow_current_position+1)\\\\n			url=document.getElementById('next_slide').value;\\\\n		if (slide==window.slideshow_current_position-1)\\\\n			url=document.getElementById('previous_slide').value;\\\\n\\\\n		if (typeof callback!='undefined')\\\\n		{\\\\n			do_ajax_request(url,function(ajax_result_raw) { _slideshow_read_in_slide(ajax_result_raw,slide); callback(); });\\\\n		} else\\\\n		{\\\\n			do_ajax_request(url,function(ajax_result_raw) { _slideshow_read_in_slide(ajax_result_raw,slide); });\\\\n		}\\\\n	} else\\\\n	{\\\\n		window.fauxmodal_alert('Internal error: should not be preloading more than one step ahead');\\\\n	}\\\\n}\\\\n\\\\nfunction _slideshow_read_in_slide(ajax_result_raw,slide)\\\\n{\\\\n	window.slideshow_slides[slide]=ajax_result_raw.responseText.replace(/(.|\\\\\\\\n)*<div class=\\\\\\\"gallery_entry_screen\\\\\\\"[^<>]*>/i,'').replace(/<!--DO_NOT_REMOVE_THIS_COMMENT-->\\\\\\\\s*<\\\\\\\\/div>(.|\\\\\\\\n)*/i,'');\\\\n}\\\\n\\\\nfunction slideshow_show_slide(slide)\\\\n{\\\\n	slideshow_ensure_loaded(slide,function() {\\\\n		if (window.slideshow_current_position!=slide) // If not already here\\\\n		{\\\\n			var slideshow_from=document.getElementById('slideshow_from');\\\\n\\\\n			var fade_elements_old=get_elements_by_class_name(document.body,'scale_down');\\\\n			if (typeof fade_elements_old[0]!='undefined')\\\\n			{\\\\n				var fade_element_old=fade_elements_old[0];\\\\n				var left_pos=find_width(fade_element_old.parentNode)/2-find_width(fade_element_old)/2;\\\\n				fade_element_old.style.left=left_pos+'px';\\\\n				fade_element_old.style.position='absolute';\\\\n			} // else probably a video\\\\n\\\\n			var cleaned_slide_html=window.slideshow_slides[slide].replace(/<!DOCTYPE [^>]*>/i,'');\\\\n			set_inner_html(document.getElementById('gallery_entry_screen'),cleaned_slide_html);\\\\n\\\\n			var fade_elements=get_elements_by_class_name(document.body,'scale_down');\\\\n			if ((typeof fade_elements[0]!='undefined') && (typeof fade_elements_old[0]!='undefined'))\\\\n			{\\\\n				var fade_element=fade_elements[0];\\\\n				set_opacity(fade_element,0);\\\\n				fade_element.parentNode.insertBefore(fade_element_old,fade_element);\\\\n				fade_element.parentNode.style.position='relative';\\\\n				fade_transition(fade_element,100.0,30,10);\\\\n				set_opacity(fade_element_old,1.0);\\\\n				fade_transition(fade_element_old,0.0,30,-10,true);\\\\n			} // else probably a video\\\\n\\\\n			if (slideshow_from)\\\\n				document.getElementById('slideshow_from').value=slideshow_from.value; // Make sure stays the same\\\\n\\\\n			window.slideshow_current_position=slide;\\\\n\\\\n			if (typeof window.show_slide_callback!='undefined') show_slide_callback();\\\\n		}\\\\n\\\\n		var fade_elements=get_elements_by_class_name(document.body,'scale_down');\\\\n		if (typeof fade_elements[0]!='undefined') // Is image\\\\n		{\\\\n			start_slideshow_timer();\\\\n			reset_slideshow_countdown();\\\\n		} else // Is video\\\\n		{\\\\n			stop_slideshow_timer('Waiting for video to finish');\\\\n		}\\\\n\\\\n		if (window.slideshow_current_position!=window.slideshow_total_slides-1)\\\\n			slideshow_ensure_loaded(slide+1);\\\\n		else\\\\n			document.getElementById('gallery_entry_screen').style.cursor='';\\\\n	});\\\\n}\\\\n\\\";\");\";}}");

?>